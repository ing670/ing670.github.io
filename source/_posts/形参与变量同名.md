---
title: 形参与变量同名
date: 2017-08-17 17:16:47
tags:
- js
- js基础
---
### 问题源于一次同事的面试题
来先上一段代码
``` js
function foo(arg){
    console.log("arg",arg)
    var arg="foo"
}
foo("bar")
```
第一反应，输出`bar`。

不不不，不会那么简单。于是想到变量提升，这个才是考点，他实际的执行顺序应该如下：
``` js
function foo(arg){
    var arg;
    console.log("arg",arg)
    arg="foo"
}
foo("bar")
```
hahahaha，经过这么一还原代码顺序，结果就清楚了
这特么结果就是`undefined`
<font size=10>**然而**</font>我实在是太年轻了，这货居然输出了`bar`
什么？？形参没有被变量提升的同名变量覆盖？？
百撕不得其姐。
![示例图](/images/timg.jpg)
如果显式定义同名变量呢？
``` js
function foo(arg){
    var arg;
    console.log("arg",arg)
}
foo("bar")
```
惊奇的发现，显示定义居然会略过，直接输出`bar`

### 问题关键在于js如何处理同名形参与变量

百度一波，发现知乎也有人讨论
https://www.zhihu.com/question/38762556
真正的答案在这里
https://www.zhihu.com/question/38405961/answer/77433885
在JavaScript中，一个变量名进入作用域的方式有4种：
Language-defined：所有的作用域默认都会给出 this 和 arguments 两个变量名;
Formal parameters（形参）：函数有形参，形参会添加到函数的作用域中;
Function declarations（函数声明）：如 function foo() {};
Variable declarations（变量声明）：如 var foo。
函数声明和变量声明总是会被移动（即hoist）到它们所在的作用域的顶部（这对你是透明的）。
至于Language-defined和形参，显然，它们已经在顶部了。
而变量的解析顺序（优先级），与变量进入作用域的4种方式的顺序一致。

### 总结一下
* **所有的var 变量都会提升到顶部**
* **function与var同名时，function的优先级要高(回顾以前的知识)**
* **形参与变量同名，并且变量仅仅是定义。就会被优先级高的形参给代替**

